// Maps to a Verilog design
struct Adder {
  in a: u32,
  in b: u32,
  out s: u32,
}

// Uses a bounded loop that busy-waits for `num_iters` cycles.
// Since concrete assignments to DUT input ports persist, 
// calling `step()` multiple times in the loop with the same inputs 
// should still produce the correct result on the adder. (This allows us to 
// reuse the same Verilog file as the other `adder_d1` tests.)
fn add_busy_wait<DUT: Adder>(in a: u32, in b: u32, in num_iters: u8, out s: u32) {
  DUT.a := a;
  DUT.b := b;
  repeat num_iters iterations {
    step();
  }
  DUT.a := X;
  DUT.b := X;
  assert_eq(s, DUT.s);
  fork();
  step();
}
