struct Identity {
  in a: u32,
  out s: u32,
}

prot explicit_fork<DUT: Identity>(in a: u32, out s: u32) {
  DUT.a := a;
  step();

  // assignment of any concrete value should never conflict
  DUT.a := X;
  assert_eq(s, DUT.s);

  // Note: changed the implicit fork to an explicit fork 
  fork();
  step();
}

prot slicing_ok<DUT: Identity>(in a: u32, out s: u32) {
  DUT.a := a;

  step();
   
  assert_eq(s[31:15], DUT.s[31:15]);   

  // TODO for Ernest: 
  // uncomment this line and see if it works with the monitor (if the round-trip test passes)
  // assert_eq(s[14:0], DUT.s[14:0]);

  fork();
  step();
}

